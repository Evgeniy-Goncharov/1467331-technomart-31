const mailButton=document.querySelector(".mail-button"),modalMail=document.querySelector(".modal-mail"),closeModalMail=modalMail.querySelector(".close-modal"),mailForm=modalMail.querySelector(".modal-mail-form"),mailUserName=modalMail.querySelector("#mail-user-name"),mailUserEmail=modalMail.querySelector("#mail-user-email"),userMailContent=modalMail.querySelector("#user-mail-content");let isStorageSupport=!0,storageUserName="",storageUserEmail="";try{storageUserName=localStorage.getItem("username"),storageUserEmail=localStorage.getItem("useremail")}catch(e){isStorageSupport=!1}mailButton.addEventListener("click",function(e){e.preventDefault(),modalMail.classList.remove("hidden"),storageUserName&&storageEmail?(mailUserName.value=storageUserName,mailUserEmail.value=storageEmail,userMailContent.focus()):mailUserName.focus()}),closeModalMail.addEventListener("click",function(e){e.preventDefault(),modalMail.classList.add("hidden"),modalMail.classList.remove("modal-error")}),mailForm.addEventListener("submit",function(e){mailUserName.value&&mailUserEmail.value&&userMailContent.value?isStorageSupport&&(localStorage.setItem("username",mailUserName.value),localStorage.setItem("useremail",mailUserEmail.value)):(e.preventDefault(),modalMail.classList.remove("modal-error"),modalMail.offsetWidth=modalMail.offsetWidth,modalMail.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(modalMail.classList.contains("hidden")||(e.preventDefault(),modalMail.classList.add("hidden"),modalMail.classList.remove("modal-error")))});